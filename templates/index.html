<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Inventory Analytics Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>

<body>
    <div class="container-fluid">
        <!-- Header -->
        <header class="bg-primary text-white py-4 mb-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1 class="mb-0">
                            <i class="fas fa-chart-line me-3"></i>
                            Page Inventory Analytics Tool
                        </h1>
                        <p class="mb-0 mt-2 opacity-75">Analyze website performance with Google Analytics data and
                            AI-powered insights</p>
                    </div>
                    <div class="col-md-4 text-md-end">
                        <div class="badge bg-light text-dark fs-6">
                            <i class="fas fa-calendar me-1"></i>
                            Last 365 days
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="container">
            <!-- URL Input Section -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-link me-2"></i>
                        Department URLs
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label for="urlInput" class="form-label">Enter department URLs (one per line):</label>
                        <textarea class="form-control" id="urlInput" rows="4"
                            placeholder="https://www.example.com/department1/&#10;https://www.example.com/department2/&#10;https://www.example.com/department3/"></textarea>
                        <div class="form-text">Enter each URL on a separate line. The tool will analyze all pages under
                            each department path.</div>
                    </div>
                </div>
            </div>

            <!-- File Naming Options -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-file-signature me-2"></i>
                        File Naming Options
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="namingMode" id="autoNaming"
                                    value="auto" checked>
                                <label class="form-check-label" for="autoNaming">
                                    <strong>Auto</strong><br>
                                    <small class="text-muted">Use department name from URL (e.g.,
                                        biophysics_analytics.xlsx)</small>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="namingMode" id="prefixNaming"
                                    value="prefix">
                                <label class="form-check-label" for="prefixNaming">
                                    <strong>Custom Prefix</strong><br>
                                    <small class="text-muted">Add custom prefix to filename</small>
                                </label>
                            </div>
                            <div class="mt-2" id="prefixInput" style="display: none;">
                                <input type="text" class="form-control form-control-sm" id="customPrefix"
                                    placeholder="Enter prefix">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="namingMode" id="customNaming"
                                    value="custom">
                                <label class="form-check-label" for="customNaming">
                                    <strong>Custom Names</strong><br>
                                    <small class="text-muted">Specify custom name for each file</small>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Custom Names Section -->
            <div class="card shadow-sm mb-4" id="customNamesSection" style="display: none;">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-edit me-2"></i>
                        Custom File Names
                    </h5>
                </div>
                <div class="card-body">
                    <div id="customNamesContainer">
                        <!-- Custom name inputs will be generated here -->
                    </div>
                </div>
            </div>

            <!-- Process Button -->
            <div class="text-center mb-4">
                <button type="button" class="btn btn-primary btn-lg" id="processBtn">
                    <i class="fas fa-play me-2"></i>
                    Process Analytics
                </button>
            </div>

            <!-- Progress Section -->
            <div class="card shadow-sm mb-4" id="progressSection" style="display: none;">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-spinner fa-spin me-2"></i>
                        Processing Analytics
                    </h5>
                </div>
                <div class="card-body">
                    <div class="progress mb-3">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" id="progressBar"
                            role="progressbar" style="width: 0%"></div>
                    </div>
                    <div id="progressText" class="text-muted">Initializing...</div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="card shadow-sm mb-4" id="resultsSection" style="display: none;">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-check-circle me-2"></i>
                        Processing Results
                    </h5>
                </div>
                <div class="card-body">
                    <div id="resultsContainer">
                        <!-- Results will be displayed here -->
                    </div>
                    <div class="text-center mt-3" id="downloadSection" style="display: none;">
                        <a href="/download" class="btn btn-success btn-lg">
                            <i class="fas fa-download me-2"></i>
                            Download Reports
                        </a>
                    </div>
                </div>
            </div>

            <!-- Error Section -->
            <div class="card shadow-sm mb-4" id="errorSection" style="display: none;">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Error
                    </h5>
                </div>
                <div class="card-body">
                    <div id="errorMessage"></div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-light py-4 mt-5">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Features</h6>
                        <ul class="list-unstyled small">
                            <li><i class="fas fa-check text-success me-2"></i>Batch processing for multiple URLs</li>
                            <li><i class="fas fa-check text-success me-2"></i>AI-powered insights using Google Gemini
                            </li>
                            <li><i class="fas fa-check text-success me-2"></i>Comprehensive Excel reports</li>
                            <li><i class="fas fa-check text-success me-2"></i>Performance analysis and recommendations
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Report Contents</h6>
                        <ul class="list-unstyled small">
                            <li><i class="fas fa-list text-primary me-2"></i>Summary with AI insights</li>
                            <li><i class="fas fa-trophy text-warning me-2"></i>Top 20 most visited pages</li>
                            <li><i class="fas fa-exclamation-triangle text-danger me-2"></i>Pages to review</li>
                            <li><i class="fas fa-table text-info me-2"></i>Complete analytics data</li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>